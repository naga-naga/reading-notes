## クラス
- レシーバとメッセージ
  - `user.name` の場合
    - `user` がレシーバ
    - `name` がメッセージ
  - Smalltalk の影響を受けているらしい
- クラスの名前
  - 必ず大文字で始める必要がある
- 未初期化のインスタンス変数を参照すると `nil`
- セッターメソッドは末尾に `=` を付ける
  - 例：`name=`
  - `attr_accessor` などがあるので直接これを書くことは無いと思うが……
- クラスメソッドの書き方二つ
  - `def self.method ... end` の形で定義
  - `class << self ... end` の内部で定義
- `||=` による遅延初期化
  - 重い処理はゲッター内でインスタンス変数にメモ化しておくと `initialize` する際に重い処理が走らない
- `self`
  - Java でいうところの `this`
- Ruby は単一継承
  - ミックスインという多重継承に似た仕組みはある
- `super`
  - 引数無しで呼ぶと、自身に渡された引数を全てスーパークラスの同名のメソッドに投げる
  - `super()` と書くと引数0個とみなされる
- `private`
  - インスタンスメソッドにのみ有効
    - クラスメソッドを private にするには、 `class << self` にするか、 `private_class_method` を使う
  - サブクラスからも呼び出せる
  - オーバーライドもできる
  - 可視性も変更できる
  - 実は引数を取れる
    - シンボルを渡すと、同名のメソッドが private になる
    - メソッド定義はシンボルを返すので、 `private def foo ... end` みたいに書ける
- `protected`
  - 同じクラスかサブクラスの中なら、レシーバ付きで呼び出せる
- 定数
  - `private_constant` で private にできる
  - メソッド内では定義できない
  - 再代入できる
    - `freeze` すれば防げるが、普通しないらしい
- 色々な変数
  - クラスインスタンス変数
    - クラスの直下で定義したインスタンス変数
    - クラスが作られたときに作られる
    - 普通のインスタンス変数とは違うらしい
  - クラス変数
    - `@@` をつける
  - グローバル変数
    - `$` をつける
    - 一部組込み変数がある
- エイリアス
  - `alias new_name original_name`
- 等値判定のメソッド
  - `equal?`
    - object_id が等しいかどうか
    - 再定義してはいけない
  - `==`
    - 人が見て等しいといえるかどうか
    - デフォルトでは object_id しかみないので、必要に応じてオーバーライドする
  - `eql?`
    - `==` より厳しい
    - これを再定義したら `Object#hash` も再定義する必要がある
    - 「`a.eql?(b)` が真ならば `a.hash == b.hash` も真」という関係を満たす必要がある
    - ハッシュ値が衝突したときに使うらしい？
  - `===`
    - `when` で使われる
- 特異メソッド
  - オブジェクト単位で定義できるメソッド
  - `def object.method ... end`
  - 実はクラスメソッドも特異メソッド
    - リファレンスにはクラスメソッドは「特異メソッド」と書かれている
